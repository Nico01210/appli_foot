<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pronostics Football</title>
    <meta name="description" content="Application de pronostics pour la Coupe du Monde et la Ligue 1">
    <meta name="theme-color" content="#2563eb">
    
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- CSS -->
    <link rel="stylesheet" href="styles.css?v=1.3">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <h1 class="logo">
                    <i class="fas fa-futbol"></i>
                    Pronostics Football
                </h1>
                <div class="user-info">
                    <!-- Affich√© quand l'utilisateur est connect√© -->
                    <div id="authenticated-user" style="display: none;">
                        <span class="user-name" id="userName" onclick="changeUserName()" title="Cliquer pour modifier votre pseudonyme">Joueur</span>
                        <div class="user-score">
                            <i class="fas fa-trophy"></i>
                            <span id="userPoints">0</span> pts
                        </div>
                        <button id="logoutBtn" class="btn btn-logout" title="Se d√©connecter">
                            <i class="fas fa-sign-out-alt"></i>
                        </button>
                    </div>
                    
                    <!-- Affich√© quand l'utilisateur n'est pas connect√© -->
                    <div id="guest-user" style="display: block;">
                        <button id="loginHeaderBtn" class="btn btn-primary">
                            <i class="fas fa-sign-in-alt"></i>
                            Se connecter
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav-tabs">
        <div class="container">
            <div class="nav-container">
                <button class="nav-tab active" data-tab="dashboard">
                    <i class="fas fa-chart-line"></i>
                    <span>Dashboard</span>
                </button>
                <button class="nav-tab" data-tab="predictions">
                    <i class="fas fa-soccer-ball"></i>
                    <span>Pronostics</span>
                </button>
                <button class="nav-tab" data-tab="leaderboard">
                    <i class="fas fa-medal"></i>
                    <span>Classement</span>
                </button>
                <button class="nav-tab" data-tab="rules">
                    <i class="fas fa-book"></i>
                    <span>R√®gles du jeu</span>
                </button>
                <button class="nav-tab" data-tab="admin">
                    <i class="fas fa-cog"></i>
                    <span>Admin</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Section d'authentification -->
    <section id="auth" class="content-section" style="display: none;">
        <div class="container">
            <div class="auth-container">
                <div class="auth-header">
                    <h1>üèÜ Pronostics Football</h1>
                    <p>Connectez-vous pour commencer √† jouer</p>
                </div>
                
                <div class="auth-form">
                    <div class="input-group">
                        <label for="authUserName">Votre pseudonyme</label>
                        <input type="text" id="authUserName" placeholder="Entrez votre pseudonyme" maxlength="20" required>
                    </div>
                    
                    <div class="input-group">
                        <label for="authEmail">Email (optionnel)</label>
                        <input type="email" id="authEmail" placeholder="votre@email.com">
                        <small>L'email permet de retrouver votre compte sur d'autres appareils</small>
                    </div>
                    
                    <button id="loginBtn" class="btn btn-primary btn-large">
                        <i class="fas fa-sign-in-alt"></i>
                        Se connecter
                    </button>
                </div>
                
                <div class="auth-info">
                    <h3>üéÆ Comment jouer ?</h3>
                    <ul>
                        <li>üéØ Pronostiquez les scores des matchs</li>
                        <li>üèÜ Gagnez des points selon vos pr√©dictions</li>
                        <li>üìä Suivez votre classement en temps r√©el</li>
                        <li>üë• D√©fiez vos amis et coll√®gues</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="main">
        <div class="container">
            <!-- Dashboard Tab -->
            <div class="tab-content active" id="dashboard">
                <div class="dashboard-header">
                    <h2>Mon Dashboard</h2>
                    <div class="tournament-selector">
                        <select id="tournamentSelect">
                            <option value="worldcup">Coupe du Monde 2026</option>
                            <option value="ligue1">Ligue 1 2024-25</option>
                        </select>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-bullseye"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalPredictions">0</h3>
                            <p>Pronostics</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="correctPredictions">0</h3>
                            <p>Corrects</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-percentage"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="accuracy">0%</h3>
                            <p>Pr√©cision</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-ranking-star"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="userRank">-</h3>
                            <p>Classement</p>
                        </div>
                    </div>
                </div>

                <div class="recent-predictions">
                    <h3>Derniers Pronostics</h3>
                    <div id="recentPredictionsList" class="predictions-list">
                        <!-- G√©n√©r√© dynamiquement -->
                    </div>
                </div>
            </div>

            <!-- Predictions Tab -->
            <div class="tab-content" id="predictions">
                <div class="predictions-header">
                    <h2>Pronostics</h2>
                    <div class="filter-section">
                        <select id="matchFilter">
                            <option value="upcoming">√Ä venir</option>
                            <option value="completed">Termin√©s</option>
                            <option value="all">Tous</option>
                        </select>
                    </div>
                </div>

                <div id="matchesList" class="matches-list">
                    <!-- G√©n√©r√© dynamiquement -->
                </div>
            </div>

            <!-- Leaderboard Tab -->
            <div class="tab-content" id="leaderboard">
                <div class="leaderboard-header">
                    <h2>Classement</h2>
                    <div class="period-selector">
                        <button class="period-btn active" data-period="overall">G√©n√©ral</button>
                        <button class="period-btn" data-period="month">Ce mois</button>
                        <button class="period-btn" data-period="week">Cette semaine</button>
                    </div>
                </div>

                <div id="leaderboardList" class="leaderboard-list">
                    <!-- G√©n√©r√© dynamiquement -->
                </div>
            </div>

            <!-- Rules Tab -->
            <div class="tab-content" id="rules">
                <div class="rules-header">
                    <h2><i class="fas fa-book"></i> R√®gles du jeu</h2>
                    <p class="rules-description">D√©couvrez comment jouer et gagner des points</p>
                </div>

                <div class="rules-sections">
                    <div class="rules-section">
                        <h3><i class="fas fa-play-circle"></i> Comment jouer</h3>
                        <div class="rules-content">
                            <ul>
                                <li><strong>S√©lectionnez un match :</strong> Cliquez sur "Pronostiquer" pour un match √† venir</li>
                                <li><strong>Saisissez votre pronostic :</strong> Entrez le score que vous pr√©disez (ex: 2-1)</li>
                                <li><strong>Validez avant le coup d'envoi :</strong> Les pronostics ne sont plus accept√©s une fois le match commenc√©</li>
                                <li><strong>Suivez vos r√©sultats :</strong> Consultez vos points dans le classement</li>
                            </ul>
                        </div>
                    </div>

                    <div class="rules-section">
                        <h3><i class="fas fa-trophy"></i> Syst√®me de points</h3>
                        <div class="rules-content">
                            <div class="points-explanation">
                                <div class="point-rule">
                                    <div class="point-value perfect">+5 points</div>
                                    <div class="point-description">
                                        <strong>Score exact :</strong> Vous avez pr√©dit le score final exact (ex: 2-1 ‚Üí 2-1)
                                    </div>
                                </div>
                                <div class="point-rule">
                                    <div class="point-value good">+3 points</div>
                                    <div class="point-description">
                                        <strong>R√©sultat correct :</strong> Vous avez trouv√© le bon vainqueur avec le bon √©cart de buts (ex: 2-0 ‚Üí 3-1)
                                    </div>
                                </div>
                                <div class="point-rule">
                                    <div class="point-value partial">+1 point</div>
                                    <div class="point-description">
                                        <strong>Vainqueur correct :</strong> Vous avez trouv√© qui gagne mais pas l'√©cart (ex: 2-1 ‚Üí 3-0)
                                    </div>
                                </div>
                                <div class="point-rule">
                                    <div class="point-value partial">+1 point</div>
                                    <div class="point-description">
                                        <strong>Vainqueur apr√®s temps r√©glementaire (phases finales) :</strong> Vous avez trouv√© le bon vainqueur en Coupe du Monde
                                    </div>
                                </div>
                                <div class="point-rule">
                                    <div class="point-value none">0 point</div>
                                    <div class="point-description">
                                        <strong>Pronostic incorrect :</strong> Vous n'avez pas trouv√© le bon r√©sultat
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="rules-section">
                        <h3><i class="fas fa-clock"></i> D√©lais et contraintes</h3>
                        <div class="rules-content">
                            <ul>
                                <li><strong>Deadline :</strong> Les pronostics doivent √™tre saisis avant le d√©but du match</li>
                                <li><strong>Modification :</strong> Vous pouvez modifier votre pronostic tant que le match n'a pas commenc√©</li>
                                <li><strong>D√©compte :</strong> Un timer vous indique le temps restant pour pronostiquer</li>
                                <li><strong>Validation :</strong> Les r√©sultats sont calcul√©s automatiquement apr√®s chaque match</li>
                            </ul>
                        </div>
                    </div>

                    <div class="rules-section">
                        <h3><i class="fas fa-medal"></i> Classement</h3>
                        <div class="rules-content">
                            <ul>
                                <li><strong>Classement g√©n√©ral :</strong> Cumul de tous vos points depuis le d√©but</li>
                                <li><strong>Classement mensuel :</strong> Points gagn√©s ce mois-ci uniquement</li>
                                <li><strong>Classement hebdomadaire :</strong> Points gagn√©s cette semaine</li>
                                <li><strong>Mise √† jour :</strong> Le classement est actualis√© en temps r√©el</li>
                            </ul>
                        </div>
                    </div>

                    <div class="rules-section">
                        <h3><i class="fas fa-lightbulb"></i> Conseils strat√©giques</h3>
                        <div class="rules-content">
                            <div class="tips-grid">
                                <div class="tip-card">
                                    <i class="fas fa-chart-line"></i>
                                    <h4>Analysez les statistiques</h4>
                                    <p>Regardez les performances r√©centes des √©quipes</p>
                                </div>
                                <div class="tip-card">
                                    <i class="fas fa-users"></i>
                                    <h4>Suivez les absents</h4>
                                    <p>Les blessures et suspensions peuvent changer le r√©sultat</p>
                                </div>
                                <div class="tip-card">
                                    <i class="fas fa-home"></i>
                                    <h4>Avantage du terrain</h4>
                                    <p>L'√©quipe qui joue √† domicile a souvent un avantage</p>
                                </div>
                                <div class="tip-card">
                                    <i class="fas fa-balance-scale"></i>
                                    <h4>Prenez des risques calcul√©s</h4>
                                    <p>Parfois, parier sur un score rare peut rapporter gros</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Admin Tab -->
            <div class="tab-content" id="admin">
                <div class="admin-header">
                    <h2>Administration</h2>
                    <p class="admin-description">G√©rez les tournois, matchs et syst√®me de points</p>
                </div>

                <div class="admin-sections">
                    <div class="admin-section">
                        <h3>Profil Utilisateur</h3>
                        <div class="profile-management">
                            <div class="profile-item">
                                <label for="userNameInput">Pseudonyme :</label>
                                <div style="display: flex; gap: 1rem; align-items: center; flex-wrap: wrap;">
                                    <input type="text" id="userNameInput" placeholder="Votre pseudonyme" maxlength="20" style="width: 150px; max-width: 150px;">
                                    <button id="saveUserName" class="btn btn-primary">
                                        <i class="fas fa-save"></i>
                                        Modifier
                                    </button>
                                </div>
                            </div>
                            <div class="profile-stats">
                                <p><strong>Membre depuis :</strong> <span id="memberSince"></span></p>
                                <p><strong>Derni√®re activit√© :</strong> <span id="lastActivity"></span></p>
                            </div>
                        </div>
                    </div>

                    <div class="admin-section">
                        <h3>Syst√®me de Points</h3>
                        <div class="points-config">
                            <div class="config-item">
                                <label for="exactScorePoints">Score exact :</label>
                                <input type="number" id="exactScorePoints" value="5">
                                <span>points</span>
                            </div>
                            <div class="config-item">
                                <label for="correctResultPoints">Bon r√©sultat :</label>
                                <input type="number" id="correctResultPoints" value="3">
                                <span>points</span>
                            </div>
                            <div class="config-item">
                                <label for="winnerRegularPoints">Vainqueur apr√®s temps r√©glementaire (phases finales) :</label>
                                <input type="number" id="winnerRegularPoints" value="1">
                                <span>points</span>
                            </div>
                        </div>
                        <button id="savePointsConfig" class="btn btn-primary">
                            <i class="fas fa-save"></i>
                            Sauvegarder
                        </button>
                    </div>

                    <div class="admin-section">
                        <h3>Gestion des Matchs</h3>
                        <div class="match-management">
                            <div class="add-match-form">
                                <h4>Ajouter un Match</h4>
                                <form id="addMatchForm">
                                    <div class="form-row">
                                        <input type="text" id="homeTeam" placeholder="√âquipe domicile" required>
                                        <input type="text" id="awayTeam" placeholder="√âquipe ext√©rieur" required>
                                    </div>
                                    <div class="form-row">
                                        <input type="datetime-local" id="matchDate" required>
                                        <select id="matchTournament" required>
                                            <option value="worldcup">Coupe du Monde</option>
                                            <option value="ligue1">Ligue 1</option>
                                        </select>
                                    </div>
                                    <button type="submit" class="btn btn-secondary">
                                        <i class="fas fa-plus"></i>
                                        Ajouter Match
                                    </button>
                                </form>
                            </div>

                            <div class="update-results">
                                <h4>Mettre √† jour les R√©sultats</h4>
                                <div id="pendingMatches" class="pending-matches">
                                    <!-- G√©n√©r√© dynamiquement -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="admin-section">
                        <h3>Statistiques</h3>
                        <div class="admin-stats">
                            <div class="admin-stat">
                                <span class="stat-label">Total utilisateurs :</span>
                                <span id="totalUsers">0</span>
                            </div>
                            <div class="admin-stat">
                                <span class="stat-label">Total pronostics :</span>
                                <span id="totalPredictionsAdmin">0</span>
                            </div>
                            <div class="admin-stat">
                                <span class="stat-label">Matchs actifs :</span>
                                <span id="activeMatches">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal pour les pronostics -->
    <div id="predictionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Faire un Pronostic</h3>
                <button class="modal-close" id="closePredictionModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="match-info">
                    <div class="teams">
                        <span id="modalHomeTeam"></span>
                        <span class="vs">VS</span>
                        <span id="modalAwayTeam"></span>
                    </div>
                    <div class="match-date" id="modalMatchDate"></div>
                    <div class="match-countdown" id="modalCountdown" style="text-align: center; margin-top: 0.5rem; font-size: 0.9rem; color: var(--primary-color); font-weight: 600;">
                        Temps restant: -
                    </div>
                </div>
                <div class="prediction-form">
                    <div class="score-inputs">
                        <div class="score-input">
                            <label for="homeScore">Score domicile</label>
                            <input type="number" id="homeScore" min="0" max="20" value="0">
                        </div>
                        <div class="score-separator">-</div>
                        <div class="score-input">
                            <label for="awayScore">Score ext√©rieur</label>
                            <input type="number" id="awayScore" min="0" max="20" value="0">
                        </div>
                    </div>
                    <button id="submitPrediction" class="btn btn-primary">
                        <i class="fas fa-check"></i>
                        <span id="submitButtonText">Confirmer le Pronostic</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- JavaScript -->
    <script src="api-client.js?v=3.0"></script>
    <script src="app.js?v=3.0"></script>
</body>
</html>